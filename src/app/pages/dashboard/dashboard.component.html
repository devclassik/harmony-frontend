<!-- Welcome Screen Animation -->
<app-welcome-screen-animation
  [show]="showWelcomeAnimation"
  [userName]="getWorkerName()"
  (close)="onWelcomeAnimationClose()"
>
</app-welcome-screen-animation>

<!-- Dashboard Content -->
<div>
  <!-- Admin Dashboard View -->
  <div *ngIf="workerRole?.toLowerCase() !== 'worker'">
    <div class="flex flex-col gap-4 p-2">
      <app-dashboard-greetings
        [userName]="'John 👋🏼'"
        [showSubText]="true"
        [subText]="'Here is a brief overview of the employees.'"
      ></app-dashboard-greetings>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-10 gap-4 p-2">
      <div class="lg:col-span-6">
        <app-bar-chart></app-bar-chart>
      </div>
      <div class="lg:col-span-4">
        <app-doughnut-chart></app-doughnut-chart>
      </div>
    </div>
    <div class="p-2">
      <app-table
        [tableTitle]="'Employee Records'"
        [viewAllLink]="'employee-records'"
        [tableData]="employees"
        [showViewAll]="true"
        [showSearch]="false"
        [showFilter]="false"
        [showPagination]="false"
        [showStatusTab]="false"
      ></app-table>
    </div>
  </div>

  <!-- Worker Dashboard View -->
  <div
    *ngIf="workerRole?.toLowerCase() === 'worker'"
    class="py-4 bg-white min-h-screen"
  >
    <!-- Loading Overlay -->
    <app-loading-overlay
      [isVisible]="isLoadingProfile"
      title="Loading Dashboard"
      message="Fetching your employee data and dashboard information..."
    ></app-loading-overlay>

    <!-- Main Content -->
    <div *ngIf="!isLoadingProfile">
      <!-- Greeting Section -->
      <app-dashboard-greetings
        [userName]="getWorkerName()"
        [showSubText]="true"
        [subText]="'Here is a brief summary of your employment.'"
        [showMetrics]="false"
      ></app-dashboard-greetings>

      <!-- Employee Information Section -->
      <div class="py-4" *ngIf="employeeInfo">
        <app-dashboard-information
          [title]="'Employee Information'"
          [employeeData]="employeeInfo"
          [personalTitle]="employeeInfo.title"
        ></app-dashboard-information>
      </div>

      <app-table
        [tableTitle]="'Leave Requests'"
        [viewAllLink]="'leave-management/annual-leave'"
        [tableData]="leaveRequests"
        [tableHeader]="leaveRequestsHeader"
        [showViewAll]="true"
        [menuItems]="actionButton"
        (menuAction)="onMenuAction($event)"
        [showSearch]="false"
        [showFilter]="false"
        [showPagination]="true"
        [showStatusTab]="false"
      ></app-table>
    </div>
  </div>

  <!-- Leave Details Modal -->
  <app-leave-details
    [view]="showLeaveDetails"
    [leaveData]="selectedLeaveData"
    [title]="'Leave Request Details'"
    [leaveType]="'Leave'"
    [totalLeaveDays]="30"
    (close)="showLeaveDetails = false"
  ></app-leave-details>
</div>
