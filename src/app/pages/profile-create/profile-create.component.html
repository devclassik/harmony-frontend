<div class="min-h-screen bg-gray-50 w-full px-6">
  <!-- Loading Overlay -->
  <app-loading-overlay
    [isVisible]="isSubmitting"
    [title]="isEditMode ? 'Updating Profile' : 'Creating Profile'"
    [message]="
      isEditMode
        ? 'Saving your profile changes...'
        : 'Creating your new profile...'
    "
  ></app-loading-overlay>

  <!-- Header with back arrow and Create/Edit Profile (on gray background) -->
  <div class="flex items-center pt-8 pb-2">
    <button
      (click)="goBack()"
      type="button"
      class="mr-2 text-gray-500 hover:text-gray-700 flex items-center justify-center cursor-pointer"
    >
      <span class="material-icons text-2xl cursor-pointer">arrow_back</span>
    </button>
    <h2 class="text-lg font-semibold text-gray-900">
      {{ isEditMode ? "Edit Profile" : "Create Profile" }}
    </h2>
  </div>

  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()" class="space-y-8">
    <!-- Employee Information Section -->
    <div class="bg-white rounded-xl mt-4 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('employeeInfo')"
          >
            <span>Employee Information</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.employeeInfo"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.employeeInfo"
            class="transition-all duration-300"
          >
            <div class="flex flex-row gap-80 w-full">
              <!-- Avatar -->
              <div class="flex flex-col items-center justify-start pt-2">
                <label for="avatarInput" class="relative cursor-pointer">
                  <div
                    class="w-48 h-48 rounded-full bg-gray-100 flex items-center justify-center overflow-hidden"
                  >
                    <img
                      *ngIf="avatarPreview; else defaultAvatar"
                      [src]="avatarPreview"
                      alt="Avatar"
                      class="w-full h-full object-cover rounded-full"
                    />
                    <ng-template #defaultAvatar>
                      <div
                        class="w-full h-full flex items-center justify-center text-gray-400 text-5xl"
                      >
                        <span class="material-icons">person</span>
                      </div>
                    </ng-template>
                  </div>
                  <input
                    id="avatarInput"
                    name="avatar"
                    type="file"
                    accept="image/*"
                    (change)="onAvatarChange($event)"
                    hidden
                  />
                  <div
                    class="absolute bottom-2 right-2 bg-gray-200 rounded-full p-1 flex items-center justify-center"
                  >
                    <span class="material-icons text-base text-gray-600"
                      >photo_camera</span
                    >
                  </div>
                </label>
              </div>
              <!-- Employee Fields -->
              <div class="flex-1 flex flex-col gap-4">
                <!-- Row 1 -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="title"
                      >Title *</label
                    >
                    <select
                      formControlName="title"
                      id="title"
                      name="title"
                      autocomplete="honorific-prefix"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('title')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    >
                      <option value="">Select</option>
                      <option *ngFor="let title of titles" [value]="title">
                        {{ title }}
                      </option>
                    </select>
                    <div
                      *ngIf="hasError('title')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("title") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label
                      class="text-sm text-gray-700 mb-1"
                      for="legalFirstName"
                      >Legal First Name *</label
                    >
                    <input
                      formControlName="legalFirstName"
                      id="legalFirstName"
                      name="legalFirstName"
                      autocomplete="given-name"
                      placeholder="Enter"
                      type="text"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('legalFirstName')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('legalFirstName')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("legalFirstName") }}
                    </div>
                  </div>
                </div>
                <!-- Row 2 -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label
                      class="text-sm text-gray-700 mb-1"
                      for="legalMiddleName"
                      >Legal Middle Name</label
                    >
                    <input
                      formControlName="legalMiddleName"
                      id="legalMiddleName"
                      name="legalMiddleName"
                      autocomplete="additional-name"
                      placeholder="Enter"
                      type="text"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('legalMiddleName')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('legalMiddleName')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("legalMiddleName") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label
                      class="text-sm text-gray-700 mb-1"
                      for="legalLastName"
                      >Legal Last Name *</label
                    >
                    <input
                      formControlName="legalLastName"
                      id="legalLastName"
                      name="legalLastName"
                      autocomplete="family-name"
                      placeholder="Enter"
                      type="text"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('legalLastName')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('legalLastName')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("legalLastName") }}
                    </div>
                  </div>
                </div>
                <!-- Row 3 -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label
                      class="text-sm text-gray-700 mb-1"
                      for="profferedName"
                      >Proffered Name Of Correspondence</label
                    >
                    <input
                      formControlName="profferedName"
                      id="profferedName"
                      name="profferedName"
                      autocomplete="name"
                      placeholder="Enter"
                      type="text"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('profferedName')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('profferedName')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("profferedName") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="gender"
                      >Gender *</label
                    >
                    <select
                      formControlName="gender"
                      id="gender"
                      name="gender"
                      autocomplete="sex"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('gender')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    >
                      <option value="">Select</option>
                      <option *ngFor="let gender of genders" [value]="gender">
                        {{ gender }}
                      </option>
                    </select>
                    <div
                      *ngIf="hasError('gender')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("gender") }}
                    </div>
                  </div>
                </div>
                <!-- Row 4 - Email and Alt Email -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="email"
                      >Email Address *</label
                    >
                    <input
                      formControlName="email"
                      id="email"
                      name="email"
                      autocomplete="email"
                      placeholder="Enter email address"
                      type="email"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('email')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('email')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("email") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="altEmail"
                      >Alternative Email</label
                    >
                    <input
                      formControlName="altEmail"
                      id="altEmail"
                      name="altEmail"
                      autocomplete="email"
                      placeholder="Enter alternative email"
                      type="email"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('altEmail')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('altEmail')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("altEmail") }}
                    </div>
                  </div>
                </div>
                <!-- Row 5 - Department and Role -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="departmentId"
                      >Department *</label
                    >
                    <select
                      formControlName="departmentId"
                      id="departmentId"
                      name="departmentId"
                      autocomplete="off"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('departmentId')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    >
                      <option value="">Select</option>
                      <option
                        *ngFor="let dept of departments"
                        [value]="dept.id"
                      >
                        {{ dept.name }}
                      </option>
                    </select>
                    <div
                      *ngIf="hasError('departmentId')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("departmentId") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="role"
                      >Role *</label
                    >
                    <input
                      formControlName="role"
                      id="role"
                      name="role"
                      type="text"
                      readonly
                      [value]="currentUserRole"
                      class="border rounded-md px-3 py-2 bg-gray-100 text-gray-600 cursor-not-allowed focus:outline-none border-gray-300"
                      placeholder="Role will be loaded from your account"
                    />
                    <div class="text-xs text-gray-500 mt-1">
                      Role is determined by your account permissions
                    </div>
                  </div>
                </div>
                <!-- Row 6 - Employment Type and Location -->
                <div class="flex flex-row gap-6">
                  <div class="flex flex-col flex-1">
                    <label
                      class="text-sm text-gray-700 mb-1"
                      for="employmentType"
                      >Employment Type *</label
                    >
                    <select
                      formControlName="employmentType"
                      id="employmentType"
                      name="employmentType"
                      autocomplete="off"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('employmentType')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    >
                      <option value="">Select</option>
                      <option
                        *ngFor="let empType of employmentTypeOptions"
                        [value]="empType"
                      >
                        {{ empType }}
                      </option>
                    </select>
                    <div
                      *ngIf="hasError('employmentType')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("employmentType") }}
                    </div>
                  </div>
                  <div class="flex flex-col flex-1">
                    <label class="text-sm text-gray-700 mb-1" for="location"
                      >Location *</label
                    >
                    <input
                      formControlName="location"
                      id="location"
                      name="location"
                      autocomplete="off"
                      placeholder="Enter work location"
                      type="text"
                      [class]="
                        'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                        (hasError('location')
                          ? 'border-red-500 focus:ring-red-400'
                          : 'border-gray-300 focus:ring-green-400')
                      "
                    />
                    <div
                      *ngIf="hasError('location')"
                      class="text-red-500 text-xs mt-1"
                    >
                      {{ getErrorMessage("location") }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Information Section (separate white card) -->
    <div class="bg-white rounded-xl mt-6 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('contactInfo')"
          >
            <span>Contact Information</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.contactInfo"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.contactInfo"
            class="transition-all duration-300"
          >
            <div class="flex-1 flex flex-col gap-4">
              <!-- Row 1 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="homeAddress"
                    >Home Address *</label
                  >
                  <input
                    formControlName="homeAddress"
                    id="homeAddress"
                    name="homeAddress"
                    autocomplete="street-address"
                    placeholder="Enter"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('homeAddress')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('homeAddress')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("homeAddress") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="homeCity"
                    >City/Town *</label
                  >
                  <select
                    formControlName="homeCity"
                    id="homeCity"
                    name="homeCity"
                    autocomplete="address-level2"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('homeCity')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option *ngFor="let city of cities" [value]="city">
                      {{ city }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('homeCity')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("homeCity") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="homeState"
                    >State/Province *</label
                  >
                  <select
                    formControlName="homeState"
                    id="homeState"
                    name="homeState"
                    autocomplete="address-level1"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('homeState')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option *ngFor="let state of states" [value]="state">
                      {{ state }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('homeState')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("homeState") }}
                  </div>
                </div>
              </div>
              <!-- Row 2 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="homeCountry"
                    >Country *</label
                  >
                  <select
                    formControlName="homeCountry"
                    id="homeCountry"
                    name="homeCountry"
                    autocomplete="country-name"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('homeCountry')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option *ngFor="let country of countries" [value]="country">
                      {{ country }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('homeCountry')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("homeCountry") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="homeZipCode"
                    >Zip Code *</label
                  >
                  <input
                    formControlName="homeZipCode"
                    id="homeZipCode"
                    name="homeZipCode"
                    autocomplete="postal-code"
                    placeholder="Enter"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('homeZipCode')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('homeZipCode')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("homeZipCode") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="mailingAddress"
                    >Mailing Address</label
                  >
                  <input
                    formControlName="mailingAddress"
                    id="mailingAddress"
                    name="mailingAddress"
                    autocomplete="street-address"
                    placeholder="Enter"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('mailingAddress')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('mailingAddress')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("mailingAddress") }}
                  </div>
                </div>
              </div>
              <!-- Row 3 -->
              <!-- Row 4 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="primaryPhone"
                    >Primary Phone *</label
                  >
                  <input
                    formControlName="primaryPhone"
                    id="primaryPhone"
                    name="primaryPhone"
                    autocomplete="tel"
                    placeholder="Enter phone number"
                    type="tel"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('primaryPhone')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div class="flex gap-4 mt-2">
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="primaryPhoneType"
                        value="Home"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Home
                    </label>
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="primaryPhoneType"
                        value="Work"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Work
                    </label>
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="primaryPhoneType"
                        value="Cell"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Cell
                    </label>
                  </div>
                  <div
                    *ngIf="hasError('primaryPhone')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("primaryPhone") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="altPhone"
                    >Alternate Phone</label
                  >
                  <input
                    formControlName="altPhone"
                    id="altPhone"
                    name="altPhone"
                    autocomplete="tel"
                    placeholder="Enter phone number"
                    type="tel"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('altPhone')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div class="flex gap-4 mt-2">
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="altPhoneType"
                        value="HOME"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Home
                    </label>
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="altPhoneType"
                        value="WORK"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Work
                    </label>
                    <label class="flex items-center text-sm text-gray-600">
                      <input
                        type="radio"
                        formControlName="altPhoneType"
                        value="CELL"
                        class="mr-1 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                      />
                      Cell
                    </label>
                  </div>
                  <div
                    *ngIf="hasError('altPhone')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("altPhone") }}
                  </div>
                </div>
              </div>
              <!-- Row 5 - Mailing Address Details -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="mailingCity"
                    >Mailing City</label
                  >
                  <input
                    formControlName="mailingCity"
                    id="mailingCity"
                    name="mailingCity"
                    autocomplete="address-level2"
                    placeholder="Enter mailing city"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('mailingCity')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('mailingCity')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("mailingCity") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="mailingState"
                    >Mailing State</label
                  >
                  <input
                    formControlName="mailingState"
                    id="mailingState"
                    name="mailingState"
                    autocomplete="address-level1"
                    placeholder="Enter mailing state"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('mailingState')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('mailingState')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("mailingState") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="mailingCountry"
                    >Mailing Country</label
                  >
                  <input
                    formControlName="mailingCountry"
                    id="mailingCountry"
                    name="mailingCountry"
                    autocomplete="country-name"
                    placeholder="Enter mailing country"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('mailingCountry')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('mailingCountry')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("mailingCountry") }}
                  </div>
                </div>
              </div>
              <!-- Row 6 - Mailing Zip Code and Other -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="mailingZipCode"
                    >Mailing Zip Code</label
                  >
                  <input
                    formControlName="mailingZipCode"
                    id="mailingZipCode"
                    name="mailingZipCode"
                    autocomplete="postal-code"
                    placeholder="Enter mailing zip code"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('mailingZipCode')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('mailingZipCode')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("mailingZipCode") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="other"
                    >Other</label
                  >
                  <textarea
                    formControlName="other"
                    id="other"
                    name="other"
                    autocomplete="off"
                    placeholder="Enter additional information"
                    rows="1"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 resize-y min-h-[42px] ' +
                      (hasError('other')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  ></textarea>
                  <div
                    *ngIf="hasError('other')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("other") }}
                  </div>
                </div>
                <div class="flex-1"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Personal Information Section -->
    <div class="bg-white rounded-xl mt-6 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('personalInfo')"
          >
            <span>Personal Information</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.personalInfo"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.personalInfo"
            class="transition-all duration-300"
          >
            <div class="flex-1 flex flex-col gap-4">
              <!-- Row 1 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="maritalStatus"
                    >Marital Status *</label
                  >
                  <select
                    formControlName="maritalStatus"
                    id="maritalStatus"
                    name="maritalStatus"
                    autocomplete="off"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('maritalStatus')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option
                      *ngFor="let status of maritalStatuses"
                      [value]="status"
                    >
                      {{ status }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('maritalStatus')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("maritalStatus") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="everDivorced"
                    >Ever Divorced *</label
                  >
                  <select
                    formControlName="everDivorced"
                    id="everDivorced"
                    name="everDivorced"
                    autocomplete="off"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('everDivorced')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option
                      *ngFor="let option of everDivorcedOptions"
                      [value]="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('everDivorced')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("everDivorced") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="dateOfBirth"
                    >Date Of Birth *</label
                  >
                  <input
                    formControlName="dateOfBirth"
                    id="dateOfBirth"
                    name="dateOfBirth"
                    autocomplete="bday"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('dateOfBirth')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('dateOfBirth')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("dateOfBirth") }}
                  </div>
                </div>
              </div>
              <!-- Row 2 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="highestQualification"
                    >Highest Qualification</label
                  >
                  <input
                    formControlName="highestQualification"
                    id="highestQualification"
                    name="highestQualification"
                    autocomplete="off"
                    placeholder="Enter your highest qualification"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('highestQualification')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('highestQualification')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("highestQualification") }}
                  </div>
                </div>
                <div class="flex-1"></div>
                <div class="flex-1"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Spiritual History Section -->
    <div class="bg-white rounded-xl mt-6 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('spiritualHistory')"
          >
            <span>Spiritual History</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.spiritualHistory"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.spiritualHistory"
            class="transition-all duration-300"
          >
            <div class="flex-1 flex flex-col gap-4">
              <!-- Row 1 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="yearSaved"
                    >Year Saved *</label
                  >
                  <input
                    formControlName="yearSaved"
                    id="yearSaved"
                    name="yearSaved"
                    autocomplete="off"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('yearSaved')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('yearSaved')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("yearSaved") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="sanctified"
                    >Sanctified *</label
                  >
                  <select
                    formControlName="sanctified"
                    id="sanctified"
                    name="sanctified"
                    autocomplete="off"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('sanctified')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option
                      *ngFor="let option of sanctifiedOptions"
                      [value]="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('sanctified')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("sanctified") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="baptizedWithWater"
                    >Baptized With Water *</label
                  >
                  <select
                    formControlName="baptizedWithWater"
                    id="baptizedWithWater"
                    name="baptizedWithWater"
                    autocomplete="off"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('baptizedWithWater')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option
                      *ngFor="let option of baptizedOptions"
                      [value]="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('baptizedWithWater')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("baptizedWithWater") }}
                  </div>
                </div>
              </div>
              <!-- Row 2 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="yearOfWaterBaptism"
                    >Year Of Water Baptism *</label
                  >
                  <input
                    formControlName="yearOfWaterBaptism"
                    id="yearOfWaterBaptism"
                    name="yearOfWaterBaptism"
                    autocomplete="off"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('yearOfWaterBaptism')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('yearOfWaterBaptism')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("yearOfWaterBaptism") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstYearInChurch"
                    >First Year In Church *</label
                  >
                  <input
                    formControlName="firstYearInChurch"
                    id="firstYearInChurch"
                    name="firstYearInChurch"
                    autocomplete="off"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstYearInChurch')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstYearInChurch')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstYearInChurch") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="isFaithfulInTithing"
                    >Are You Faithful In Tithing *</label
                  >
                  <select
                    formControlName="isFaithfulInTithing"
                    id="isFaithfulInTithing"
                    name="isFaithfulInTithing"
                    autocomplete="off"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('isFaithfulInTithing')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  >
                    <option value="">Select</option>
                    <option
                      *ngFor="let option of tithingOptions"
                      [value]="option"
                    >
                      {{ option }}
                    </option>
                  </select>
                  <div
                    *ngIf="hasError('isFaithfulInTithing')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("isFaithfulInTithing") }}
                  </div>
                </div>
              </div>
              <!-- Row 3 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonPastor"
                    >First Sermon Pastor *</label
                  >
                  <input
                    formControlName="firstSermonPastor"
                    id="firstSermonPastor"
                    name="firstSermonPastor"
                    autocomplete="off"
                    placeholder="Enter pastor name"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonPastor')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonPastor')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonPastor") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="currentPastor"
                    >Current Pastor</label
                  >
                  <input
                    formControlName="currentPastor"
                    id="currentPastor"
                    name="currentPastor"
                    autocomplete="off"
                    placeholder="Enter current pastor name"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentPastor')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentPastor')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentPastor") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="dateOfFirstSermon"
                    >Date Of First Sermon *</label
                  >
                  <input
                    formControlName="dateOfFirstSermon"
                    id="dateOfFirstSermon"
                    name="dateOfFirstSermon"
                    autocomplete="off"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('dateOfFirstSermon')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('dateOfFirstSermon')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("dateOfFirstSermon") }}
                  </div>
                </div>
              </div>
              <!-- Row 4 - First Sermon Address -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonAddress"
                    >First Sermon Address *</label
                  >
                  <input
                    formControlName="firstSermonAddress"
                    id="firstSermonAddress"
                    name="firstSermonAddress"
                    autocomplete="off"
                    placeholder="Enter address"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonAddress')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonAddress')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonAddress") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonCity"
                    >First Sermon City *</label
                  >
                  <input
                    formControlName="firstSermonCity"
                    id="firstSermonCity"
                    name="firstSermonCity"
                    autocomplete="off"
                    placeholder="Enter city"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonCity')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonCity')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonCity") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonState"
                    >First Sermon State *</label
                  >
                  <input
                    formControlName="firstSermonState"
                    id="firstSermonState"
                    name="firstSermonState"
                    autocomplete="off"
                    placeholder="Enter state"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonState')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonState')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonState") }}
                  </div>
                </div>
              </div>
              <!-- Row 5 - First Sermon Country and Zip -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonCountry"
                    >First Sermon Country *</label
                  >
                  <input
                    formControlName="firstSermonCountry"
                    id="firstSermonCountry"
                    name="firstSermonCountry"
                    autocomplete="off"
                    placeholder="Enter country"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonCountry')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonCountry')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonCountry") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="firstSermonZipCode"
                    >First Sermon Zip Code *</label
                  >
                  <input
                    formControlName="firstSermonZipCode"
                    id="firstSermonZipCode"
                    name="firstSermonZipCode"
                    autocomplete="off"
                    placeholder="Enter zip code"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('firstSermonZipCode')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('firstSermonZipCode')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("firstSermonZipCode") }}
                  </div>
                </div>
                <div class="flex-1"></div>
              </div>
              <!-- Row 6 - Current Church Information -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="currentChurchAddress"
                    >Current Church Address</label
                  >
                  <input
                    formControlName="currentChurchAddress"
                    id="currentChurchAddress"
                    name="currentChurchAddress"
                    autocomplete="off"
                    placeholder="Enter current church address"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentChurchAddress')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentChurchAddress')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentChurchAddress") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="currentChurchCity"
                    >Current Church City</label
                  >
                  <input
                    formControlName="currentChurchCity"
                    id="currentChurchCity"
                    name="currentChurchCity"
                    autocomplete="off"
                    placeholder="Enter current church city"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentChurchCity')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentChurchCity')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentChurchCity") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="currentChurchState"
                    >Current Church State</label
                  >
                  <input
                    formControlName="currentChurchState"
                    id="currentChurchState"
                    name="currentChurchState"
                    autocomplete="off"
                    placeholder="Enter current church state"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentChurchState')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentChurchState')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentChurchState") }}
                  </div>
                </div>
              </div>
              <!-- Row 7 - Current Church Country and Zip -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="currentChurchCountry"
                    >Current Church Country</label
                  >
                  <input
                    formControlName="currentChurchCountry"
                    id="currentChurchCountry"
                    name="currentChurchCountry"
                    autocomplete="off"
                    placeholder="Enter current church country"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentChurchCountry')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentChurchCountry')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentChurchCountry") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label
                    class="text-sm text-gray-700 mb-1"
                    for="currentChurchZipCode"
                    >Current Church Zip Code</label
                  >
                  <input
                    formControlName="currentChurchZipCode"
                    id="currentChurchZipCode"
                    name="currentChurchZipCode"
                    autocomplete="off"
                    placeholder="Enter current church zip code"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('currentChurchZipCode')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('currentChurchZipCode')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("currentChurchZipCode") }}
                  </div>
                </div>
                <div class="flex-1"></div>
              </div>
              <!-- Previous Positions Dynamic Section -->
              <div formArrayName="previousPositions">
                <div
                  *ngFor="
                    let position of previousPositions.controls;
                    let i = index
                  "
                  [formGroupName]="i"
                  class="mb-4"
                >
                  <div class="flex items-center justify-between mb-4">
                    <h4 class="text-sm font-medium text-gray-700">
                      Previous Position {{ i + 1 }}
                    </h4>
                    <button
                      *ngIf="i > 0"
                      type="button"
                      (click)="removePreviousPosition(i)"
                      class="text-red-500 hover:text-red-700 text-sm"
                    >
                      Remove
                    </button>
                  </div>
                  <div class="flex flex-row gap-6">
                    <div class="flex flex-col flex-1">
                      <label
                        class="text-sm text-gray-700 mb-1"
                        [for]="'previousPositionTitle_' + i"
                        >Previous Position Title *</label
                      >
                      <input
                        formControlName="previousPositionTitle"
                        [id]="'previousPositionTitle_' + i"
                        autocomplete="off"
                        placeholder="Enter"
                        type="text"
                        class="border rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 border-gray-300 focus:ring-green-400"
                      />
                    </div>
                    <div class="flex flex-col flex-1">
                      <label
                        class="text-sm text-gray-700 mb-1"
                        [for]="'previousPosition_' + i"
                        >Previous Position *</label
                      >
                      <input
                        formControlName="previousPosition"
                        [id]="'previousPosition_' + i"
                        autocomplete="off"
                        placeholder="Enter"
                        type="text"
                        class="border rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 border-gray-300 focus:ring-green-400"
                      />
                    </div>
                    <div class="flex flex-col flex-1">
                      <label
                        class="text-sm text-gray-700 mb-1"
                        [for]="'previousPositionDate_' + i"
                        >Date *</label
                      >
                      <input
                        formControlName="previousPositionDate"
                        [id]="'previousPositionDate_' + i"
                        autocomplete="off"
                        placeholder="MM-DD-YYYY"
                        type="date"
                        class="border rounded-md px-3 py-2 bg-white focus:outline-none focus:ring-2 border-gray-300 focus:ring-green-400"
                      />
                    </div>
                  </div>
                </div>
                <!-- Add Button -->
                <div class="flex justify-start mt-2">
                  <button
                    type="button"
                    (click)="addPreviousPosition()"
                    class="flex items-center text-green-600 hover:text-green-700 text-sm font-medium"
                  >
                    <svg
                      class="w-4 h-4 mr-1"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                      ></path>
                    </svg>
                    Add
                  </button>
                </div>
              </div>
              <!-- Row 7 -->
              <div class="flex flex-row gap-6">
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="ordained"
                    >Ordained *</label
                  >
                  <input
                    formControlName="ordained"
                    id="ordained"
                    name="ordained"
                    autocomplete="off"
                    placeholder="Enter"
                    type="text"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('ordained')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('ordained')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("ordained") }}
                  </div>
                </div>
                <div class="flex flex-col flex-1">
                  <label class="text-sm text-gray-700 mb-1" for="ordainedDate"
                    >Date *</label
                  >
                  <input
                    formControlName="ordainedDate"
                    id="ordainedDate"
                    name="ordainedDate"
                    autocomplete="off"
                    placeholder="MM-DD-YYYY"
                    type="date"
                    [class]="
                      'border rounded-md px-3 py-2 bg-gray-50 focus:outline-none focus:ring-2 ' +
                      (hasError('ordainedDate')
                        ? 'border-red-500 focus:ring-red-400'
                        : 'border-gray-300 focus:ring-green-400')
                    "
                  />
                  <div
                    *ngIf="hasError('ordainedDate')"
                    class="text-red-500 text-xs mt-1"
                  >
                    {{ getErrorMessage("ordainedDate") }}
                  </div>
                </div>
                <div class="flex-1"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Legal Questions Section -->
    <div class="bg-white rounded-xl mt-6 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('legalQuestions')"
          >
            <span>Legal Questions</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.legalQuestions"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.legalQuestions"
            class="transition-all duration-300"
          >
            <div class="flex-1 flex flex-col gap-6">
              <!-- Question 1 -->
              <div class="flex flex-col">
                <label class="text-sm text-gray-700 mb-3"
                  >Have you ever been convicted of, pled guilty to, or pled no
                  contest to a crime or misdemeanor? *</label
                >
                <div class="flex gap-6">
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="beenConvicted"
                      value="Yes"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    Yes
                  </label>
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="beenConvicted"
                      value="No"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    No
                  </label>
                </div>
                <div
                  *ngIf="hasError('beenConvicted')"
                  class="text-red-500 text-xs mt-1"
                >
                  {{ getErrorMessage("beenConvicted") }}
                </div>
              </div>

              <!-- Question 2 -->
              <div class="flex flex-col">
                <label class="text-sm text-gray-700 mb-3"
                  >Have you ever been the subject of a sexual misconduct or
                  child abuse investigation? *</label
                >
                <div class="flex gap-6">
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="hasBeenInvestigatedForMisconductOrAbuse"
                      value="Yes"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    Yes
                  </label>
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="hasBeenInvestigatedForMisconductOrAbuse"
                      value="No"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    No
                  </label>
                </div>
                <div
                  *ngIf="hasError('hasBeenInvestigatedForMisconductOrAbuse')"
                  class="text-red-500 text-xs mt-1"
                >
                  {{
                    getErrorMessage("hasBeenInvestigatedForMisconductOrAbuse")
                  }}
                </div>
              </div>

              <!-- Question 3 -->
              <div class="flex flex-col">
                <label class="text-sm text-gray-700 mb-3"
                  >Is there any circumstance in your background that could call
                  into question your integrity or being entrusted with the
                  supervision of children? *</label
                >
                <div class="flex gap-6">
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="hasQuestionableBackground"
                      value="Yes"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    Yes
                  </label>
                  <label class="flex items-center text-sm text-gray-600">
                    <input
                      type="radio"
                      formControlName="hasQuestionableBackground"
                      value="No"
                      class="mr-2 w-4 h-4 text-green-600 bg-gray-100 border-gray-300 focus:ring-green-500 focus:ring-2 rounded-full"
                    />
                    No
                  </label>
                </div>
                <div
                  *ngIf="hasError('hasQuestionableBackground')"
                  class="text-red-500 text-xs mt-1"
                >
                  {{ getErrorMessage("hasQuestionableBackground") }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Upload Documents Section -->
    <div class="bg-white rounded-xl mt-6 shadow-sm">
      <div class="pt-8 pb-12 px-8">
        <div class="w-full">
          <div
            class="text-base font-medium text-gray-800 border-b border-gray-100 pb-2 mb-6 flex items-center justify-between cursor-pointer"
            (click)="toggleAccordion('uploadDocuments')"
          >
            <span>Upload Documents</span>
            <button
              type="button"
              class="flex items-center text-gray-400 hover:text-gray-600 transition-colors"
            >
              <svg
                class="w-5 h-5 transform transition-transform"
                [class.rotate-180]="!accordionState.uploadDocuments"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
          </div>
          <div
            *ngIf="accordionState.uploadDocuments"
            class="transition-all duration-300"
          >
            <!-- Upload Documents Content -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-4">
                <div class="flex flex-col">
                  <label class="text-sm text-gray-700 mb-2">
                    Upload CV/Resume (PDF)
                  </label>
                  <input
                    type="file"
                    accept=".pdf"
                    class="file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"
                  />
                </div>
                <div class="flex flex-col">
                  <label class="text-sm text-gray-700 mb-2">
                    Upload Cover Letter (PDF)
                  </label>
                  <input
                    type="file"
                    accept=".pdf"
                    class="file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"
                  />
                </div>
              </div>
              <div class="space-y-4">
                <div class="flex flex-col">
                  <label class="text-sm text-gray-700 mb-2">
                    Upload Certificates (PDF)
                  </label>
                  <input
                    type="file"
                    accept=".pdf"
                    multiple
                    class="file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"
                  />
                </div>
                <div class="flex flex-col">
                  <label class="text-sm text-gray-700 mb-2">
                    Upload Other Documents (PDF)
                  </label>
                  <input
                    type="file"
                    accept=".pdf"
                    multiple
                    class="file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-medium file:bg-green-50 file:text-green-700 hover:file:bg-green-100"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="flex justify-end gap-4 pt-6 pb-12">
      <button
        type="button"
        (click)="goBack()"
        class="px-8 py-3 rounded-md font-medium border border-green-600 text-green-600 hover:bg-green-50 transition-colors"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="!isFormValid()"
        [class]="
          'px-8 py-3 rounded-md font-medium transition-colors ' +
          (isFormValid()
            ? 'bg-green-600 hover:bg-green-700 text-white'
            : 'bg-gray-300 text-gray-500 cursor-not-allowed')
        "
      >
        {{ isEditMode ? "Update Profile" : "Submit" }}
      </button>
    </div>
  </form>
</div>
