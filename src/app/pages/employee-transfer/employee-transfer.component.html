<div class="p-2">
  <app-table
    [tableTitle]="'Transfer'"
    [tableHeader]="tableHeader"
    [tableData]="employees"
    [showViewAll]="false"
    [showFilter]="false"
    [showStatusTab]="true"
    [statusTabs]="statusTabs"
    [activeStatusTab]="selectedStatus"
    (statusTabChange)="onStatusTabChange($event)"
    [filterTabs]="filterTabs"
    [activeFilterTab]="selectedFilter"
    (filterTabChange)="onFilterTabChange($event)"
    [searchValue]="searchValue"
    (search)="onSearch($event)"
    [tableData]="filteredEmployees"
    [menuItems]="actionButton"
    (menuAction)="onMenuAction($event)"
    [showCalendar]="false"
    [showButton]="shouldShowCreateButton"
    showButtonText="Create Request"
    showButtonIcon="assets/svg/add.svg"
    showButtonStyle="bg-gradient-to-r from-[#12C16F] to-[#0A8754] hover:from-[#0A8754] hover:to-[#12C16F]"
    (showButtonActionClick)="onCreateTransferRequest()"
    [showList]="false"
  ></app-table>
</div>

<app-employee-details
  [view]="showEmployeeDetails"
  [showButton]="true"
  [noButtonText]="'Reject'"
  [yesButtonText]="'Approve'"
  [yesButtonDisabled]="
    selectedTransferRecord?.status?.toUpperCase() === 'APPROVED'
  "
  [noButtonDisabled]="
    selectedTransferRecord?.status?.toUpperCase() === 'REJECTED'
  "
  (confirm)="actionToPerform($event)"
  (close)="showEmployeeDetails = false"
  [employee]="selectedEmployeeRecord"
  [employeeDetails]="selectedEmployeeDetails"
  [transferData]="selectedTransferRecord"
  [allTransfers]="selectedEmployeeTransfers"
  [transferHistory]="selectedTransferHistory"
></app-employee-details>

<app-confirm-prompt
  *ngIf="showModal"
  [title]="promptConfig?.title || ''"
  [text]="promptConfig?.text || ''"
  [yesButtonText]="promptConfig?.yesButtonText || ''"
  [noButtonText]="promptConfig?.noButtonText || ''"
  (confirmed)="onModalConfirm($event)"
  (closed)="onModalClose()"
  [data]="selectedEmployeeRecord"
></app-confirm-prompt>

<!-- Loading Overlay -->
<app-loading-overlay
  *ngIf="isLoading"
  [isVisible]="isLoading"
  [title]="loadingTitle"
  [message]="getLoadingMessage"
></app-loading-overlay>

<!-- Create Transfer Request Component -->
<app-leave-details
  [view]="showCreateTransferRequest"
  [isTransfer]="true"
  [mode]="'create'"
  [title]="'Create Transfer Request'"
  [leaveType]="'Transfer'"
  (close)="onCloseCreateTransferRequest()"
  (submit)="onCreateTransferRequestSubmitted($event)"
></app-leave-details>
