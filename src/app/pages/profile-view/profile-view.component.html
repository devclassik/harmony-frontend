<div class="min-h-screen bg-gray-50 w-full px-6">
  <!-- Loading Overlay -->
  <app-loading-overlay
    [isVisible]="isLoadingProfile"
    title="Loading Profile"
    message="Fetching your profile information..."
  ></app-loading-overlay>

  <!-- Header -->
  <div class="flex items-center justify-between pt-8 pb-6">
    <div class="flex items-center">
      <button
        (click)="goBack()"
        type="button"
        class="mr-2 text-gray-500 hover:text-gray-700 flex items-center justify-center cursor-pointer"
      >
        <span class="material-icons text-2xl cursor-pointer">arrow_back</span>
      </button>
      <h2 class="text-lg font-semibold text-gray-900">
        {{ workerName }}'s Profile
      </h2>
    </div>
    <div class="flex items-center gap-4">
      <!-- Edit Profile Icon -->
      <button
        (click)="editProfile()"
        class="bg-gradient-to-r from-[#12C16F] to-[#0A8754] hover:from-[#0A8754] hover:to-[#12C16F] text-white p-2 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#12C16F] focus:ring-offset-2"
        title="Edit Profile"
      >
        <svg
          class="w-5 h-5"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
          ></path>
        </svg>
      </button>

      <!-- Retire Text -->
      <span
        (click)="retireProfile()"
        class="text-red-600 hover:text-red-800 cursor-pointer font-medium transition-colors duration-200"
        title="Retire Profile"
      >
        Retire
      </span>
    </div>
  </div>

  <!-- Employee Information Section -->
  <div class="py-4" *ngIf="employeeInfo">
    <app-dashboard-information
      [title]="'Employee Information'"
      [employeeData]="employeeInfo"
      [isProfileMode]="true"
      [personalTitle]="employeeInfo.title"
    ></app-dashboard-information>
  </div>

  <!-- Contact Information Section -->
  <div class="py-4" *ngIf="otherInformationData.length > 0">
    <app-info-section
      title="Contact Information"
      [data]="otherInformationData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>

  <div
    class="py-4"
    *ngIf="familyInformationData.length > 0 && currentUserRole !== 'worker'"
  >
    <app-info-section
      title="Family Information"
      [data]="familyInformationData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>

  <!-- Personal Information Section -->
  <div
    class="py-4"
    *ngIf="personalInformationData.length > 0 && currentUserRole === 'worker'"
  >
    <app-info-section
      title="Personal Information"
      [data]="personalInformationData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>

  <!-- Spiritual History Section -->
  <div class="py-4" *ngIf="spiritualHistoryData.length > 0">
    <app-info-section
      title="Spiritual History"
      [data]="spiritualHistoryData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>

  <!-- Legal Questions Section -->
  <div class="py-4" *ngIf="legalQuestionsData.length > 0">
    <app-info-section
      title="Legal Questions"
      [data]="legalQuestionsData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>

  <!-- Upload Documents Section -->
  <div class="py-4" *ngIf="uploadDocumentsData.length > 0">
    <app-info-section
      title="Upload Documents"
      [data]="uploadDocumentsData"
      [columns]="3"
      [isExpanded]="true"
    ></app-info-section>
  </div>
</div>

<!-- Retirement Request Modal -->
<app-create-retirement-request
  [show]="showRetirementModal"
  (close)="onRetirementModalClose()"
  (submitted)="onRetirementSubmit($event)"
></app-create-retirement-request>
